module.exports=[10035,a=>{"use strict";a.s(["default",()=>aR],10035);var b=a.i(87924),c=a.i(36455),d=a.i(86304),e=a.i(99570),f=a.i(75793),g=a.i(5050),h=(0,g.createServerReference)("7f5690f73b4c66e45285b6050f18b343408d54e327",g.callServer,void 0,g.findSourceMapURL,"getDepartments"),i=(0,g.createServerReference)("7f65fbc40428b36df0e381cc8aad40295f23bab6c6",g.callServer,void 0,g.findSourceMapURL,"deleteUser"),j=(0,g.createServerReference)("7f445c319f72833a18a1d703a9017a3622f9782b68",g.callServer,void 0,g.findSourceMapURL,"getUserEmploymentStatus"),k=a.i(33323),l=a.i(70837),m=a.i(70025),n=a.i(84505),o=a.i(15618),p=a.i(60246),q=a.i(72131),r=a.i(23292),s=a.i(72233),t=a.i(91119),u=a.i(14574),v=a.i(69876),w=a.i(30553),x="horizontal",y=["horizontal","vertical"],z=q.forwardRef((a,c)=>{var d;let{decorative:e,orientation:f=x,...g}=a,h=(d=f,y.includes(d))?f:x;return(0,b.jsx)(w.Primitive.div,{"data-orientation":h,...e?{role:"none"}:{"aria-orientation":"vertical"===h?h:void 0,role:"separator"},...g,ref:c})});z.displayName="Separator";var A=a.i(68114);function B({className:a,orientation:c="horizontal",decorative:d=!0,...e}){return(0,b.jsx)(z,{"data-slot":"separator",decorative:d,orientation:c,className:(0,A.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...e})}var C=(0,g.createServerReference)("7feea0af7d530ffc699797b99e8d39ceb977655446",g.callServer,void 0,g.findSourceMapURL,"getUserReligions");let D=["A+","A-","B+","B-","AB+","AB-","O+","O-"],E=["A+","A","A-","B+","B","B-","C+","C","C-","D+","D","F"],F=["No Probation","1 Month","2 Months","3 Months","4 Months","5 Months","6 Months"];var G=a.i(33217),H=a.i(73570),I=a.i(70106);let J=(0,I.default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),K=(0,I.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),L=(0,I.default)("cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);var M=a.i(73237),N=a.i(41675),O=a.i(41710),P=a.i(90166);let Q=(0,I.default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),R=(0,I.default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),S=(0,I.default)("badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]);var T=a.i(92258),U=a.i(24987),V=a.i(63519),W=a.i(46842),X=a.i(55584),Y=a.i(35732),Z=a.i(6015),$=(0,g.createServerReference)("7f6808cdca1c2c1b14a8e5f7a084c31013de3e467a",g.callServer,void 0,g.findSourceMapURL,"getProfilePicture"),_=a.i(24569),aa=a.i(17755),ab=a.i(81560);let ac=a=>({queryKey:["profilePics"],queryFn:()=>$({employeeId:a}),enabled:!!a,refetchOnMount:!1,refetchOnWindowFocus:!1}),ad=({user:a,onViewDetails:c,onEdit:f,onDelete:g})=>{let h=(0,A.calculateDurationSinceJoining)(a.dateOfJoining),{data:i,isFetching:j}=(0,G.useQuery)(ac(a.employeeId));if(j)return(0,b.jsx)(Z.TableRow,{children:(0,b.jsx)(X.LoadingDots,{className:"p-4"})});let k=null;return i&&(k=URL.createObjectURL(i)),(0,b.jsxs)(Z.TableRow,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>c(a),children:[(0,b.jsx)(Z.TableCell,{onClick:a=>a.stopPropagation(),children:(0,b.jsxs)(s.Avatar,{className:"h-14 w-14",children:[(0,b.jsx)(s.AvatarImage,{src:k||"/placeholder.svg",alt:a.fullName}),(0,b.jsx)(s.AvatarFallback,{children:a.fullName.split(" ").map(a=>a[0]).join("").toUpperCase()})]})}),(0,b.jsx)(Z.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("span",{className:"font-medium",children:a.fullName}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,b.jsx)(T.Mail,{className:"h-3 w-3"}),a.email]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,b.jsx)(V.Phone,{className:"h-3 w-3"}),a.mobileNumber]})]})}),(0,b.jsx)(Z.TableCell,{children:(0,b.jsx)(d.Badge,{variant:"outline",className:"font-mono text-xs",children:a.employeeId})}),(0,b.jsx)(Z.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(N.Calendar,{className:"h-3 w-3 text-muted-foreground"}),(0,A.formatDate)(a.dateOfJoining)]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:h})]})}),(0,b.jsx)(Z.TableCell,{children:(0,b.jsx)(d.Badge,{className:`text-xs ${{Administration:"bg-purple-100 text-purple-800","Information Technology":"bg-blue-100 text-blue-800","Accounts & Finance":"bg-green-100 text-green-800","Human Resources":"bg-orange-100 text-orange-800","Customer Service":"bg-cyan-100 text-cyan-800",Design:"bg-pink-100 text-pink-800","Quality Control":"bg-yellow-100 text-yellow-800",Operations:"bg-gray-100 text-gray-800",Management:"bg-indigo-100 text-indigo-800",Production:"bg-red-100 text-red-800"}[a.department?.name??""]||"bg-gray-100 text-gray-800"}`,variant:"secondary",children:a.department?.name})}),(0,b.jsx)(Z.TableCell,{children:(0,b.jsx)(d.Badge,{variant:(a=>"Admin"===a?"default":a.includes("PM")?"secondary":a.includes("In-charge")?"outline":"secondary")(a.role?.name??""),className:"text-xs",children:a.role?.name})}),(0,b.jsx)(Z.TableCell,{children:(0,b.jsx)(d.Badge,{className:`text-xs ${(a=>a.startsWith("A")?"bg-green-100 text-green-800":a.startsWith("B")?"bg-blue-100 text-blue-800":a.startsWith("C")?"bg-yellow-100 text-yellow-800":a.startsWith("D")?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800")(a.grading)}`,variant:"secondary",children:a.grading})}),(0,b.jsx)(Z.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm font-mono",children:[(0,b.jsx)(P.DollarSign,{className:"h-3 w-3 text-muted-foreground"}),(0,A.formatSalary)(a.basicSalary)]})}),(0,b.jsx)(Z.TableCell,{children:(0,b.jsx)("div",{className:"text-sm font-mono text-muted-foreground",children:(0,A.formatSalary)(a.overTimeAmount)})}),(0,b.jsx)(Z.TableCell,{children:a.teamId?(0,b.jsx)(d.Badge,{variant:"outline",className:"text-xs",children:a.team?.name}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Unassigned"})}),(0,b.jsx)(Z.TableCell,{onClick:a=>a.stopPropagation(),children:(0,b.jsxs)(Y.DropdownMenu,{children:[(0,b.jsx)(Y.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[(0,b.jsx)(aa.MoreHorizontal,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,b.jsxs)(Y.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(Y.DropdownMenuItem,{onClick:()=>f(a),children:[(0,b.jsx)(_.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,b.jsxs)(Y.DropdownMenuItem,{onClick:()=>g(a.id),className:"text-destructive",children:[(0,b.jsx)(ab.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]})},ae=a=>({Administration:"bg-purple-100 text-purple-800","Information Technology":"bg-blue-100 text-blue-800","Accounts & Finance":"bg-green-100 text-green-800","Human Resources":"bg-orange-100 text-orange-800","Customer Service":"bg-cyan-100 text-cyan-800",Design:"bg-pink-100 text-pink-800","Quality Control":"bg-yellow-100 text-yellow-800",Operations:"bg-gray-100 text-gray-800",Management:"bg-indigo-100 text-indigo-800",Production:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",af=a=>a.startsWith("A")?"bg-green-100 text-green-800":a.startsWith("B")?"bg-blue-100 text-blue-800":a.startsWith("C")?"bg-yellow-100 text-yellow-800":a.startsWith("D")?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800";function ag({isOpen:a,onClose:c,user:e}){let{data:g}=(0,f.default)({queryKey:["religions"],queryFn:C}),{data:h}=(0,f.default)({queryKey:["employmentStatus"],queryFn:j}),{data:i}=(0,G.useQuery)(ac(e?.employeeId));if(!e)return null;let k=null;i&&(k=URL.createObjectURL(i));let l=(a=>{let b=new Date,c=new Date(a),d=b.getFullYear()-c.getFullYear(),e=b.getMonth()-c.getMonth();return(e<0||0===e&&b.getDate()<c.getDate())&&d--,d})(e.dateOfBirth);return(0,b.jsx)(u.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(u.DialogContent,{className:"lg:min-w-5xl",children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsxs)(u.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(W.User,{className:"h-5 w-5"}),"User Details - ",e.fullName]}),(0,b.jsxs)(u.DialogDescription,{children:["Comprehensive information for ",e.fullName," (Employee ID:"," ",e.employeeId,")"]})]}),(0,b.jsx)(v.ScrollArea,{className:"max-h-[70vh] pr-4",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(t.Card,{children:(0,b.jsx)(t.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)(s.Avatar,{className:"h-24 w-24",children:[(0,b.jsx)(s.AvatarImage,{src:k||"/placeholder.svg",alt:e.fullName}),(0,b.jsx)(s.AvatarFallback,{className:"text-2xl",children:e.fullName.split(" ").map(a=>a[0]).join("").toUpperCase()})]}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:e.fullName}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(d.Badge,{className:`${ae(e.department?.name??"")}`,variant:"secondary",children:e.department?.name}),(0,b.jsx)(d.Badge,{variant:"outline",children:e.role?.name}),(0,b.jsxs)(d.Badge,{className:`${af(e.grading)}`,variant:"secondary",children:["Grade: ",e.grading]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(S,{className:"h-4 w-4"}),e.employeeId]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(N.Calendar,{className:"h-4 w-4"}),"Joined ",(0,A.formatDate)(e.dateOfJoining)]})]})]})]})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(t.Card,{children:[(0,b.jsx)(t.CardHeader,{children:(0,b.jsxs)(t.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(W.User,{className:"h-5 w-5"}),"Personal Information"]})}),(0,b.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),(0,b.jsx)("p",{className:"font-medium",children:e.fullName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"National ID"}),(0,b.jsx)("p",{className:"font-mono",children:e.nid})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(L,{className:"h-4 w-4"}),"Date of Birth"]}),(0,b.jsxs)("p",{children:[(0,A.formatDate)(e.dateOfBirth)," (",l," years old)"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(Q,{className:"h-4 w-4"}),"Blood Group"]}),(0,b.jsx)(d.Badge,{variant:"outline",className:"font-mono",children:e.bloodGroup})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"EnumResponse"}),(0,b.jsx)("p",{className:"font-medium",children:g?.data.find(a=>a.value===e.religion)?.name})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(V.Phone,{className:"h-4 w-4"}),"Mobile Number"]}),(0,b.jsx)("p",{className:"font-mono",children:e.mobileNumber})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(T.Mail,{className:"h-4 w-4"}),"Email Address"]}),(0,b.jsx)("p",{className:"break-all",children:e.email})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(U.MapPin,{className:"h-4 w-4"}),"Address"]}),(0,b.jsx)("p",{className:"text-sm leading-relaxed",children:e.address})]})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsx)(t.CardHeader,{children:(0,b.jsxs)(t.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(H.AlertTriangle,{className:"h-5 w-5"}),"Emergency Contact"]})}),(0,b.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact Person"}),(0,b.jsx)("p",{className:"font-medium",children:e.emergencyContactName})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(V.Phone,{className:"h-4 w-4"}),"Contact Number"]}),(0,b.jsx)("p",{className:"font-mono",children:e.emergencyContactNumber})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(t.Card,{children:[(0,b.jsx)(t.CardHeader,{children:(0,b.jsxs)(t.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(J,{className:"h-5 w-5"}),"Professional Information"]})}),(0,b.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Employee ID"}),(0,b.jsx)(d.Badge,{variant:"outline",className:"font-mono",children:e.employeeId})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(N.Calendar,{className:"h-4 w-4"}),"Date of Joining"]}),(0,b.jsx)("p",{children:(0,A.formatDate)(e.dateOfJoining)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(K,{className:"h-4 w-4"}),"Department"]}),(0,b.jsx)(d.Badge,{className:`${ae(e.department?.name??"")}`,variant:"secondary",children:e.department?.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Role"}),(0,b.jsx)(d.Badge,{variant:"outline",children:e.role?.name??""})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(R,{className:"h-4 w-4"}),"Grading"]}),(0,b.jsx)(d.Badge,{className:`${af(e.grading)}`,variant:"secondary",children:e.grading})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(p.Users,{className:"h-4 w-4"}),"Team Assignment"]}),e.teamId?(0,b.jsx)(d.Badge,{variant:"outline",children:e.teamId?"Unknown Team":"Unassigned"}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"Unassigned"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Employment Status"}),(0,b.jsx)(d.Badge,{variant:"outline",className:"font-medium",children:h?.data.find(a=>a.value===e.employmentStatus)?.name??""})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(O.Clock,{className:"h-4 w-4"}),"Probation Period"]}),(0,b.jsx)(d.Badge,{variant:"outline",children:e.probationPeriod})]})]})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsx)(t.CardHeader,{children:(0,b.jsxs)(t.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(P.DollarSign,{className:"h-5 w-5"}),"Financial Information"]})}),(0,b.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Basic Salary"}),(0,b.jsx)("p",{className:"text-xl font-bold text-green-600",children:(0,A.formatSalary)(e.basicSalary)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Gross Salary"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(e.basicSalary+e.medicalAllowance+e.conveyanceAllowance+e.houseRent)})]})]}),(0,b.jsx)(B,{}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"House Rent Allowance"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(e.houseRent)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Medical Allowance"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(e.medicalAllowance)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Conveyance Allowance"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(e.conveyanceAllowance)})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(M.Calculator,{className:"h-4 w-4"}),"Overtime Amount (per hour)"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(e.overTimeAmount)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Formula: (salary ÷ 30 ÷ 8) × 2 × 0.6"})]})]})]}),(0,b.jsx)(B,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Overhead Cost"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(e.overheadCost)})]})]})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsx)(t.CardHeader,{children:(0,b.jsx)(t.CardTitle,{className:"text-lg",children:"Record Information"})}),(0,b.jsx)(t.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-muted-foreground",children:"Created At"}),(0,b.jsx)("p",{children:(0,A.formatDate)(e.createdAt)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-muted-foreground",children:"Last Updated"}),(0,b.jsx)("p",{children:(0,A.formatDate)(e.updatedAt)})]})]})})]})]})})]})})}var ah=a.i(81579),ai=a.i(66317),aj=a.i(3547),ak=a.i(43273),al=a.i(66718),am=a.i(70430),an=a.i(80701),ao=a.i(15964),ap=(0,g.createServerReference)("7f53f8c4a464272ce11654b1797d818a4cff571559",g.callServer,void 0,g.findSourceMapURL,"getRoles"),aq=a.i(76166),ar=(0,g.createServerReference)("7f9c18cf54fd9fd9ffbbfcf0dbd7c1b9c893c4e926",g.callServer,void 0,g.findSourceMapURL,"createUser"),as=(0,g.createServerReference)("7f626405597f4e7fa4db7ed2a57923383626139aef",g.callServer,void 0,g.findSourceMapURL,"updateUser"),at=(0,g.createServerReference)("7f9c86d49fe2391085cfaf8aa3a3b5b515b38521bc",g.callServer,void 0,g.findSourceMapURL,"uploadUserProfilePicture"),au=a.i(15807),av=a.i(19111);let aw=av.default.object({fullName:av.default.string().min(1,"Full name is required"),nid:av.default.string().min(1,"NID is required"),mobileNumber:av.default.string().min(5,"Mobile number is required"),email:av.default.email("Invalid email"),bloodGroup:av.default.string().min(1,"Blood group is required"),dateOfBirth:av.default.date({error:"Date of birth is required"}),address:av.default.string().min(1,"Address is required"),religion:av.default.number().min(0,"Religion is required"),emergencyContactName:av.default.string().min(1,"Emergency contact name required"),emergencyContactNumber:av.default.string().min(1,"Emergency contact number required"),employeeId:av.default.string().min(1,"Employee ID is required"),dateOfJoining:av.default.date({error:"Joining date is required"}),departmentId:av.default.string().min(1,"Department is required"),roleId:av.default.string().min(1,"Role is required"),grading:av.default.string().min(1,"Grading is required"),probationPeriod:av.default.string().min(1,"Probation period is required"),teamId:av.default.string().min(1,"Team is required"),designation:av.default.string().min(1,"Designation is required"),basicSalary:av.default.number().nonnegative(),houseRent:av.default.number().nonnegative(),medicalAllowance:av.default.number().nonnegative(),conveyanceAllowance:av.default.number().nonnegative(),overTimeAmount:av.default.number().nonnegative(),overheadCost:av.default.number().nonnegative(),password:av.default.string().min(6,"Password must be at least 6 characters")}),ax={fullName:"",nid:"",mobileNumber:"",email:"",bloodGroup:"",dateOfBirth:void 0,address:"",religion:0,emergencyContactName:"",emergencyContactNumber:"",employeeId:"",dateOfJoining:void 0,departmentId:"",roleId:"",grading:"",probationPeriod:"",teamId:"",designation:"",basicSalary:0,houseRent:0,medicalAllowance:0,conveyanceAllowance:0,overTimeAmount:0,overheadCost:0,password:""};var ay=a.i(59501),az=a.i(14548);let aA=(0,I.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var aB=a.i(33508),aC=a.i(95245);function aD({isOpen:a,onClose:c,user:d}){let{data:g}=(0,f.default)({queryKey:["teams"],queryFn:aq.getTeams}),{data:i}=(0,f.default)({queryKey:["roles"],queryFn:ap}),{data:j}=(0,f.default)({queryKey:["departments"],queryFn:h}),{data:k}=(0,f.default)({queryKey:["religions"],queryFn:C}),{register:l,handleSubmit:m,reset:n,setValue:o,watch:p,formState:{errors:w,isSubmitting:x}}=(0,aC.useForm)({resolver:(0,ay.zodResolver)(aw)}),{mutateAsync:y}=(0,ao.useSkillMutation)({mutationFn:a=>ar(a),queryKey:["users"]}),{mutateAsync:z}=(0,ao.useSkillMutation)({mutationFn:({employeeId:a,body:b})=>at({employeeId:a,body:b}),onClose:c,reset:n,queryKey:["profilePics"]}),{mutateAsync:A}=(0,ao.useSkillMutation)({mutationFn:({user:a,userId:b})=>as(a,b),onClose:c,reset:n,queryKey:["users"]}),{data:B}=(0,G.useQuery)(ac(d?.employeeId)),[H,I]=(0,q.useState)(),[J,K]=(0,q.useState)(),[L,M]=(0,q.useState)(null),[N,O]=(0,q.useState)(void 0),P=(0,q.useRef)(null),Q=p(["basicSalary","houseRent","medicalAllowance","conveyanceAllowance"]);(0,q.useEffect)(()=>{o("overTimeAmount",Math.round(Q.reduce((a,b)=>Number(a)+Number(b),0)/30/8*1.2))},[Q]),(0,q.useEffect)(()=>{if(d)n({...d,dateOfBirth:new Date(d.dateOfBirth),dateOfJoining:new Date(d.dateOfJoining)}),K((0,au.toBangladeshTime)(d.dateOfBirth)),I((0,au.toBangladeshTime)(d.dateOfJoining)),o("dateOfBirth",(0,au.toBangladeshTime)(d.dateOfBirth)||new Date),o("dateOfJoining",(0,au.toBangladeshTime)(d.dateOfJoining)||new Date);else{n(ax);let a=Math.floor(new Date().getTime()/1e6);M(null),o("employeeId","EMP"+a)}},[d,n,o]);let R=({field:a,date:b})=>{"dateOfJoining"===a?I(b):K(b)},S=()=>{I(void 0),K(void 0),c()},T=async a=>{let b=r.toast.loading("Saving...");try{if(d){let c=await A({user:a,userId:d.id});if(c.success&&N){r.toast.loading("Uploading profile picture...",{id:b});let a=new FormData;a.append("File",N),await z({employeeId:c.data.id,body:a})}r.toast.success("User updated successfully!",{id:b})}else{let c=await y(a);if(c.success&&N){r.toast.loading("Uploading profile picture...",{id:b});let a=new FormData;a.append("File",N),await z({employeeId:c.data.id,body:a})}r.toast.success("User updated successfully!",{id:b})}}catch(a){console.error(a),r.toast.error("Unexpected error occurred",{id:b})}},U=null;return B&&d&&(U=URL.createObjectURL(B)),(0,b.jsx)(u.Dialog,{open:a,onOpenChange:S,children:(0,b.jsxs)(u.DialogContent,{className:"min-w-[80vw] lg:min-w-5xl",children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsxs)(u.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(W.User,{className:"h-5 w-5"}),d?"Edit User":"Add New User"]}),(0,b.jsx)(u.DialogDescription,{children:d?"Update user information below.":"Enter user details to create a new user account."})]}),(0,b.jsx)(v.ScrollArea,{className:"max-h-[70vh] pr-4",children:(0,b.jsxs)("form",{className:"space-y-6",children:[(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsx)(t.CardTitle,{className:"text-lg",children:"Profile Picture"}),(0,b.jsx)(t.CardDescription,{children:"Upload a profile picture for the user"})]}),(0,b.jsxs)(t.CardContent,{className:"flex items-center gap-4",children:[(0,b.jsxs)(s.Avatar,{className:"h-20 w-20",children:[(0,b.jsx)(s.AvatarImage,{src:L||U||"/placeholder.svg",alt:d?.fullName||"User"}),(0,b.jsx)(s.AvatarFallback,{children:d?.fullName?d?.fullName.split(" ").map(a=>a[0]).join("").toUpperCase():"U"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(e.Button,{type:"button",variant:"outline",onClick:()=>P.current?.click(),className:"flex items-center gap-2",children:[(0,b.jsx)(aA,{className:"h-4 w-4"}),"Upload Picture"]}),(0,b.jsx)("input",{ref:P,type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(O(b),b){let a=new FileReader;a.onload=a=>{M(a.target?.result)},a.readAsDataURL(b)}},className:"hidden"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recommended: Square image, max 2MB"})]})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsx)(t.CardTitle,{className:"text-lg",children:"Personal Information"}),(0,b.jsx)(t.CardDescription,{children:"Basic personal details"})]}),(0,b.jsxs)(t.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(ai.default,{label:"Full Name",id:"fullName",register:l,errors:w}),(0,b.jsx)(ai.default,{label:"National ID (NID)",id:"nid",register:l,errors:w}),(0,b.jsx)(ai.default,{label:"Mobile Number",id:"mobileNumber",register:l,errors:w}),(0,b.jsx)(ai.default,{label:"Email Address",id:"email",type:"email",register:l,errors:w}),(0,b.jsx)(aj.default,{label:"Blood Group",id:"bloodGroup",setValue:o,errors:w,defaultValue:d?.bloodGroup,children:D.map(a=>(0,b.jsx)(an.SelectItem,{value:a,children:a},a))}),(0,b.jsx)(ah.default,{label:"Date of Birth",id:"dateOfBirth",errors:w,setValue:o,handleDateChange:R,dateValue:J}),(0,b.jsx)(aj.default,{label:"Religion",id:"religion",setValue:o,errors:w,defaultValue:d?.religion?.toString(),valueAsNumber:!0,children:k?.data.map(a=>(0,b.jsx)(an.SelectItem,{value:a.value.toString(),children:a.name},a.value))}),(0,b.jsx)("div",{className:"md:col-span-2 lg:col-span-3",children:(0,b.jsx)(ak.default,{label:"Address",id:"address",register:l,errors:w})})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsx)(t.CardTitle,{className:"text-lg",children:"Emergency Contact"}),(0,b.jsx)(t.CardDescription,{children:"Emergency contact person details"})]}),(0,b.jsxs)(t.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(ai.default,{label:"Emergency Contact Name",id:"emergencyContactName",register:l,errors:w}),(0,b.jsx)(ai.default,{label:"Emergency Contact Number",id:"emergencyContactNumber",register:l,errors:w})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsx)(t.CardTitle,{className:"text-lg",children:"Professional Information"}),(0,b.jsx)(t.CardDescription,{children:"Work-related details and assignments"})]}),(0,b.jsxs)(t.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(ai.default,{label:"Employee ID",id:"employeeId",register:l,errors:w,disabled:!0,className:"bg-muted",helperText:"Auto-generated by the system"}),(0,b.jsx)(ah.default,{label:"Date of Joining",id:"dateOfJoining",errors:w,setValue:o,handleDateChange:R,dateValue:H}),(0,b.jsx)(aj.default,{label:"Department",id:"departmentId",setValue:o,errors:w,defaultValue:d?.departmentId,children:j?.data.map(a=>(0,b.jsx)(an.SelectItem,{value:a.id,children:a.name},a.id))}),(0,b.jsx)(aj.default,{label:"Role",id:"roleId",setValue:o,errors:w,defaultValue:d?.roleId,children:i?.data.map(a=>(0,b.jsx)(an.SelectItem,{value:a.id,children:a.name},a.id))}),(0,b.jsx)(aj.default,{label:"Grading",id:"grading",setValue:o,errors:w,defaultValue:d?.grading,children:E.map(a=>(0,b.jsx)(an.SelectItem,{value:a,children:a},a))}),(0,b.jsx)(aj.default,{label:"Probation Period",id:"probationPeriod",setValue:o,errors:w,defaultValue:d?.probationPeriod,children:F.map(a=>(0,b.jsx)(an.SelectItem,{value:a,children:a},a))}),(0,b.jsx)(aj.default,{label:"Team",id:"teamId",setValue:o,errors:w,defaultValue:d?.teamId,children:g?.data.map(a=>(0,b.jsx)(an.SelectItem,{value:a.id,children:a.name},a.id))}),(0,b.jsx)(ai.default,{label:"Designation",id:"designation",register:l,errors:w}),(0,b.jsx)(ai.default,{label:"Password",id:"password",register:l,errors:w,helperText:d?"  You cannot change password from here":"",disabled:!!d,className:d?"bg-muted":""})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsx)(t.CardTitle,{className:"text-lg",children:"Financial Information"}),(0,b.jsx)(t.CardDescription,{children:"Salary and cost-related details"})]}),(0,b.jsxs)(t.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(ai.default,{label:"Basic Salary (BDT)",id:"basicSalary",register:l,errors:w,valueAsNumber:!0}),(0,b.jsx)(ai.default,{label:"House Allowance (BDT)",id:"houseRent",register:l,errors:w,valueAsNumber:!0}),(0,b.jsx)(ai.default,{label:"Medical Allowance (BDT)",id:"medicalAllowance",register:l,errors:w,valueAsNumber:!0}),(0,b.jsx)(ai.default,{label:"Conveyance Allowance (BDT)",id:"conveyanceAllowance",register:l,errors:w,valueAsNumber:!0}),(0,b.jsx)(ai.default,{label:"Over Time Amount (BDT)",id:"overTimeAmount",register:l,errors:w,valueAsNumber:!0,disabled:!0,className:"bg-muted"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(am.Label,{htmlFor:"grossSalary",className:"flex items-center gap-1",children:"Gross Salary (BDT)"}),(0,b.jsx)(al.Input,{id:"grossSalary",type:"number",min:"0",placeholder:"Auto calculated",readOnly:!0,disabled:!0,className:"bg-muted",value:Q.reduce((a,b)=>Number(a)+Number(b),0)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Auto calculated"})]}),(0,b.jsx)(ai.default,{label:"Overhead Cost (BDT)",id:"overheadCost",register:l,errors:w,valueAsNumber:!0})]})]})]})}),(0,b.jsxs)(u.DialogFooter,{children:[(0,b.jsxs)(e.Button,{type:"button",variant:"outline",onClick:S,children:[(0,b.jsx)(aB.X,{className:"mr-2 h-4 w-4"}),"Cancel"]}),(0,b.jsxs)(e.Button,{type:"submit",onClick:m(T),disabled:x,children:[(0,b.jsx)(az.Save,{className:"mr-2 h-4 w-4"}),d?"Update User":"Create User"]})]})]})})}let aE=(0,I.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),aF=(0,I.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),aG=({stats:a})=>(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Total Users"}),(0,b.jsx)(p.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.total}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"All registered users"})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Active Users"}),(0,b.jsx)(aE,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.active}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Permanent users"})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"On Probation"}),(0,b.jsx)(O.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:a.onProbation}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users in probation period"})]})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Departments"}),(0,b.jsx)(aF,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.departments}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active departments"})]})]})]});var aH=a.i(69012),aI=a.i(87532),aJ=a.i(5784),aK=a.i(13749),aL=a.i(50522),aM=a.i(18341),aN=a.i(31746),aO=a.i(67552);let aP=({users:a,sort:c,onSort:d,onEdit:f,onDelete:g,onViewDetails:h,currentPage:i,totalPages:j,onPageChange:k,totalItems:l,itemsPerPage:m})=>{let n=({field:a,children:f})=>(0,b.jsx)(Z.TableHead,{children:(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",className:"h-auto p-0 font-semibold hover:bg-transparent",onClick:()=>d(a),children:[f,c.field===a&&("asc"===c.direction?(0,b.jsx)(aO.ChevronUp,{className:"ml-1 h-4 w-4"}):(0,b.jsx)(aJ.ChevronDown,{className:"ml-1 h-4 w-4"}))]})}),o=Math.min(i*m,l);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(t.Card,{className:"p-0",children:(0,b.jsx)(t.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(Z.Table,{children:[(0,b.jsx)(Z.TableHeader,{children:(0,b.jsxs)(Z.TableRow,{children:[(0,b.jsx)(Z.TableHead,{className:"w-[80px]",children:"Profile"}),(0,b.jsx)(n,{field:"fullName",children:"Name & Contact"}),(0,b.jsx)(n,{field:"employeeId",children:"Employee ID"}),(0,b.jsx)(n,{field:"dateOfJoining",children:"Joining Date"}),(0,b.jsx)(n,{field:"department",children:"Department"}),(0,b.jsx)(n,{field:"role",children:"Role"}),(0,b.jsx)(n,{field:"grading",children:"Grading"}),(0,b.jsx)(n,{field:"basicSalary",children:"Salary"}),(0,b.jsx)(n,{field:"overTimeAmount",children:"Overtime"}),(0,b.jsx)(n,{field:"teamId",children:"Team"}),(0,b.jsx)(Z.TableHead,{className:"w-[50px]",children:"Actions"})]})}),(0,b.jsx)(Z.TableBody,{children:0===a.length?(0,b.jsx)(Z.TableRow,{children:(0,b.jsx)(Z.TableCell,{colSpan:12,className:"text-center py-8 text-muted-foreground",children:"No users found"})}):a.map(a=>(0,b.jsx)(ad,{user:a,onViewDetails:h,onEdit:f,onDelete:g},a.id))})]})})})}),j>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(i-1)*m+1," to ",o," of ",l," users"]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>k(1),disabled:1===i,children:[(0,b.jsx)(aM.ChevronsLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"First page"})]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>k(i-1),disabled:1===i,children:[(0,b.jsx)(aK.ChevronLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Previous page"})]}),(0,b.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,j)},(a,c)=>{let d=Math.max(1,Math.min(j-4,i-2))+c;return(0,b.jsx)(e.Button,{variant:i===d?"default":"outline",size:"sm",onClick:()=>k(d),className:"w-8 h-8 p-0",children:d},d)})}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>k(i+1),disabled:i===j,children:[(0,b.jsx)(aL.ChevronRight,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Next page"})]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>k(j),disabled:i===j,children:[(0,b.jsx)(aN.ChevronsRight,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Last page"})]})]})]})]})},aQ=({users:a,handleEditUser:c,handleDeleteUser:g,handleViewDetails:i})=>{let{data:j}=(0,f.default)({queryKey:["teams"],queryFn:aq.getTeams}),{data:k}=(0,f.default)({queryKey:["departments"],queryFn:h}),{data:l}=(0,f.default)({queryKey:["roles"],queryFn:ap}),[m,n]=(0,q.useState)(1),[o,p]=(0,q.useState)({search:"",department:"",role:"",teamId:"",bloodGroup:"",grading:"",probationPeriod:""}),[r,s]=(0,q.useState)({field:"fullName",direction:"asc"}),u=(0,q.useMemo)(()=>{let b=a.filter(a=>{let b=!o.search||a.fullName.toLowerCase().includes(o.search.toLowerCase())||a.email.toLowerCase().includes(o.search.toLowerCase())||a.employeeId.toLowerCase().includes(o.search.toLowerCase())||a.mobileNumber.includes(o.search),c=!o.department||a.departmentId===o.department,d=!o.role||a.roleId===o.role,e=!o.teamId||a.teamId===o.teamId,f=!o.bloodGroup||a.bloodGroup===o.bloodGroup,g=!o.grading||a.grading===o.grading,h=!o.probationPeriod||a.probationPeriod===o.probationPeriod;return b&&c&&d&&e&&f&&g&&h});return b.sort((a,b)=>{let c=a[r.field],d=b[r.field];return"string"==typeof c&&"string"==typeof d?"asc"===r.direction?c.localeCompare(d):d.localeCompare(c):"number"==typeof c&&"number"==typeof d?"asc"===r.direction?c-d:d-c:0}),b},[a,o,r]),v=Math.ceil(u.length/10),w=u.slice((m-1)*10,10*m),x=(a,b)=>{if("all"===b){p(b=>({...b,[a]:""})),n(1);return}p(c=>({...c,[a]:b})),n(1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsxs)(t.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(aH.Filter,{className:"h-5 w-5"}),"Filters"]}),(0,b.jsx)(t.CardDescription,{children:"Filter users by various criteria"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Search"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(aI.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(al.Input,{placeholder:"Search users...",value:o.search,onChange:a=>x("search",a.target.value),className:"pl-10 w-full"})]})]}),(0,b.jsxs)("div",{className:"space-y-2 w-full",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Department"}),(0,b.jsxs)(an.Select,{value:o.department,onValueChange:a=>x("department",a),children:[(0,b.jsx)(an.SelectTrigger,{className:"w-full",children:(0,b.jsx)(an.SelectValue,{placeholder:"All departments"})}),(0,b.jsxs)(an.SelectContent,{children:[(0,b.jsx)(an.SelectItem,{value:"all",children:"All departments"}),k?.data.map(a=>(0,b.jsx)(an.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Role"}),(0,b.jsxs)(an.Select,{value:o.role,onValueChange:a=>x("role",a),children:[(0,b.jsx)(an.SelectTrigger,{className:"w-full",children:(0,b.jsx)(an.SelectValue,{placeholder:"All roles"})}),(0,b.jsxs)(an.SelectContent,{children:[(0,b.jsx)(an.SelectItem,{value:"all",children:"All roles"}),l?.data.map(a=>(0,b.jsx)(an.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Team"}),(0,b.jsxs)(an.Select,{value:o.teamId,onValueChange:a=>x("teamId",a),children:[(0,b.jsx)(an.SelectTrigger,{className:"w-full",children:(0,b.jsx)(an.SelectValue,{placeholder:"All teams"})}),(0,b.jsxs)(an.SelectContent,{children:[(0,b.jsx)(an.SelectItem,{value:"all",children:"All teams"}),j?.data.map(a=>(0,b.jsx)(an.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Blood Group"}),(0,b.jsxs)(an.Select,{value:o.bloodGroup,onValueChange:a=>x("bloodGroup",a),children:[(0,b.jsx)(an.SelectTrigger,{className:"w-full",children:(0,b.jsx)(an.SelectValue,{placeholder:"All blood groups"})}),(0,b.jsxs)(an.SelectContent,{children:[(0,b.jsx)(an.SelectItem,{value:"all",children:"All blood groups"}),D.map(a=>(0,b.jsx)(an.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Grading"}),(0,b.jsxs)(an.Select,{value:o.grading,onValueChange:a=>x("grading",a),children:[(0,b.jsx)(an.SelectTrigger,{className:"w-full",children:(0,b.jsx)(an.SelectValue,{placeholder:"All grades"})}),(0,b.jsxs)(an.SelectContent,{children:[(0,b.jsx)(an.SelectItem,{value:"all",children:"All grades"}),E.map(a=>(0,b.jsx)(an.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Probation"}),(0,b.jsxs)(an.Select,{value:o.probationPeriod,onValueChange:a=>x("probationPeriod",a),children:[(0,b.jsx)(an.SelectTrigger,{className:"w-full",children:(0,b.jsx)(an.SelectValue,{placeholder:"All probation status"})}),(0,b.jsxs)(an.SelectContent,{children:[(0,b.jsx)(an.SelectItem,{value:"all",children:"All probation status"}),F.map(a=>(0,b.jsx)(an.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>{p({search:"",department:"",role:"",teamId:"",bloodGroup:"",grading:"",probationPeriod:""}),n(1)},className:"w-full bg-transparent",children:"Clear Filters"})})]}),Object.entries(o).some(([,a])=>a)&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Active filters:"}),Object.entries(o).map(([a,c])=>c&&(0,b.jsx)(d.Badge,{variant:"secondary",className:"text-xs",children:a.toUpperCase()},a))]})]})]}),(0,b.jsx)(aP,{users:w,sort:r,onSort:a=>{s(b=>({field:a,direction:b.field===a&&"asc"===b.direction?"desc":"asc"}))},onEdit:c,onDelete:g,onViewDetails:i,currentPage:m,totalPages:v,onPageChange:n,totalItems:u.length,itemsPerPage:10})]})};function aR(){let{data:a,isFetching:g}=(0,f.default)({queryKey:["users"],queryFn:k.getUsers}),{data:s,isFetching:t}=(0,f.default)({queryKey:["departments"],queryFn:h}),{data:u,isFetching:v}=(0,f.default)({queryKey:["employmentStatus"],queryFn:j}),{mutateAsync:w}=(0,m.useMutation)({mutationFn:a=>i(a),onSuccess:a=>{console.log(a)}}),[x,y]=(0,q.useState)(!1),[z,A]=(0,q.useState)(!1),[B,C]=(0,q.useState)(null),D=(0,q.useMemo)(()=>{if(a?.data.length===0||s?.data.length===0)return{total:0,active:0,onProbation:0,departments:0};let b=a?.data.length??0,c=a?.data.filter(a=>"Permanent"===(0,l.getStatusName)(u?.data,a.employmentStatus)).length;return{total:b,active:c??0,onProbation:a?.data.filter(a=>"Probation"!=(0,l.getStatusName)(u?.data,a.employmentStatus)).length??0,departments:s?.data.length??0}},[a,s,g,t]),E=async a=>{let b=r.toast.loading("Deleting user...");if((await w(a)).success)return void r.toast.success("User deleted successfully!",{id:b});r.toast.dismiss(b)};return(g||a?.success)&&(t||s?.success)&&(v||u?.success)?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Users,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)(d.Badge,{variant:"secondary",className:"text-sm",children:[a?.data.length??0," users"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(n.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,b.jsxs)(e.Button,{onClick:()=>{C(null),y(!0)},size:"sm",children:[(0,b.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]}),(0,b.jsx)(aG,{stats:D}),(0,b.jsx)(aQ,{users:a?.data??[],handleEditUser:a=>{C(a),y(!0)},handleDeleteUser:E,handleViewDetails:a=>{C(a),A(!0)}}),(0,b.jsx)(aD,{isOpen:x,onClose:()=>y(!1),user:B}),(0,b.jsx)(ag,{isOpen:z,onClose:()=>A(!1),user:B})]}):(0,b.jsx)(c.default,{message:a?.message??"Something went wrong",status:500})}}];

//# sourceMappingURL=src_components_settings_users_user-mangement_tsx_fd434fbf._.js.map