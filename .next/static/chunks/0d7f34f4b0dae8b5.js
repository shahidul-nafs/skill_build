(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51099,e=>{"use strict";e.s(["default",()=>ez],51099);var a=e.i(43476),l=e.i(33129),s=e.i(87486),t=e.i(19455),r=e.i(33989),n=e.i(95187),i=(0,n.createServerReference)("7f5690f73b4c66e45285b6050f18b343408d54e327",n.callServer,void 0,n.findSourceMapURL,"getDepartments"),d=(0,n.createServerReference)("7f65fbc40428b36df0e381cc8aad40295f23bab6c6",n.callServer,void 0,n.findSourceMapURL,"deleteUser"),c=(0,n.createServerReference)("7f445c319f72833a18a1d703a9017a3622f9782b68",n.callServer,void 0,n.findSourceMapURL,"getUserEmploymentStatus"),o=e.i(66669),m=e.i(26679),u=e.i(54616),x=e.i(40160),h=e.i(7233),g=e.i(61911),f=e.i(71645),j=e.i(46696),p=e.i(99676),v=e.i(15288),N=e.i(76639),b=e.i(59684),y=e.i(48425),C="horizontal",w=["horizontal","vertical"],S=f.forwardRef((e,l)=>{var s;let{decorative:t,orientation:r=C,...n}=e,i=(s=r,w.includes(s))?r:C;return(0,a.jsx)(y.Primitive.div,{"data-orientation":i,...t?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"},...n,ref:l})});S.displayName="Separator";var A=e.i(75157);function D(e){let{className:l,orientation:s="horizontal",decorative:t=!0,...r}=e;return(0,a.jsx)(S,{"data-slot":"separator",decorative:t,orientation:s,className:(0,A.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",l),...r})}var I=(0,n.createServerReference)("7feea0af7d530ffc699797b99e8d39ceb977655446",n.callServer,void 0,n.findSourceMapURL,"getUserReligions");let T=["A+","A-","B+","B-","AB+","AB-","O+","O-"],M=["A+","A","A-","B+","B","B-","C+","C","C-","D+","D","F"],k=["No Probation","1 Month","2 Months","3 Months","4 Months","5 Months","6 Months"];var B=e.i(66027),U=e.i(78894),P=e.i(75254);let R=(0,P.default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),q=(0,P.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),F=(0,P.default)("cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);var O=e.i(21557),V=e.i(87316),H=e.i(3116),L=e.i(12426);let E=(0,P.default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),z=(0,P.default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),G=(0,P.default)("badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]);var J=e.i(63488),K=e.i(46897),W=e.i(43432),Q=e.i(84614),Y=e.i(79920),X=e.i(55146),Z=e.i(84774),$=(0,n.createServerReference)("7f6808cdca1c2c1b14a8e5f7a084c31013de3e467a",n.callServer,void 0,n.findSourceMapURL,"getProfilePicture"),_=e.i(88511),ee=e.i(41071),ea=e.i(27612);let el=e=>({queryKey:["profilePics"],queryFn:()=>$({employeeId:e}),enabled:!!e,refetchOnMount:!1,refetchOnWindowFocus:!1}),es=e=>{var l,r,n,i,d,c,o;let{user:m,onViewDetails:u,onEdit:x,onDelete:h}=e,g=(0,A.calculateDurationSinceJoining)(m.dateOfJoining),{data:f,isFetching:j}=(0,B.useQuery)(el(m.employeeId));if(j)return(0,a.jsx)(Z.TableRow,{children:(0,a.jsx)(Y.LoadingDots,{className:"p-4"})});let v=null;return f&&(v=URL.createObjectURL(f)),(0,a.jsxs)(Z.TableRow,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>u(m),children:[(0,a.jsx)(Z.TableCell,{onClick:e=>e.stopPropagation(),children:(0,a.jsxs)(p.Avatar,{className:"h-14 w-14",children:[(0,a.jsx)(p.AvatarImage,{src:v||"/placeholder.svg",alt:m.fullName}),(0,a.jsx)(p.AvatarFallback,{children:m.fullName.split(" ").map(e=>e[0]).join("").toUpperCase()})]})}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"font-medium",children:m.fullName}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)(J.Mail,{className:"h-3 w-3"}),m.email]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)(W.Phone,{className:"h-3 w-3"}),m.mobileNumber]})]})}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsx)(s.Badge,{variant:"outline",className:"font-mono text-xs",children:m.employeeId})}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(V.Calendar,{className:"h-3 w-3 text-muted-foreground"}),(0,A.formatDate)(m.dateOfJoining)]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:g})]})}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsx)(s.Badge,{className:"text-xs ".concat({Administration:"bg-purple-100 text-purple-800","Information Technology":"bg-blue-100 text-blue-800","Accounts & Finance":"bg-green-100 text-green-800","Human Resources":"bg-orange-100 text-orange-800","Customer Service":"bg-cyan-100 text-cyan-800",Design:"bg-pink-100 text-pink-800","Quality Control":"bg-yellow-100 text-yellow-800",Operations:"bg-gray-100 text-gray-800",Management:"bg-indigo-100 text-indigo-800",Production:"bg-red-100 text-red-800"}[null!=(c=null==(l=m.department)?void 0:l.name)?c:""]||"bg-gray-100 text-gray-800"),variant:"secondary",children:null==(r=m.department)?void 0:r.name})}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsx)(s.Badge,{variant:(e=>"Admin"===e?"default":e.includes("PM")?"secondary":e.includes("In-charge")?"outline":"secondary")(null!=(o=null==(n=m.role)?void 0:n.name)?o:""),className:"text-xs",children:null==(i=m.role)?void 0:i.name})}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsx)(s.Badge,{className:"text-xs ".concat((e=>e.startsWith("A")?"bg-green-100 text-green-800":e.startsWith("B")?"bg-blue-100 text-blue-800":e.startsWith("C")?"bg-yellow-100 text-yellow-800":e.startsWith("D")?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800")(m.grading)),variant:"secondary",children:m.grading})}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm font-mono",children:[(0,a.jsx)(L.DollarSign,{className:"h-3 w-3 text-muted-foreground"}),(0,A.formatSalary)(m.basicSalary)]})}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsx)("div",{className:"text-sm font-mono text-muted-foreground",children:(0,A.formatSalary)(m.overTimeAmount)})}),(0,a.jsx)(Z.TableCell,{children:m.teamId?(0,a.jsx)(s.Badge,{variant:"outline",className:"text-xs",children:null==(d=m.team)?void 0:d.name}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Unassigned"})}),(0,a.jsx)(Z.TableCell,{onClick:e=>e.stopPropagation(),children:(0,a.jsxs)(X.DropdownMenu,{children:[(0,a.jsx)(X.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(t.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[(0,a.jsx)(ee.MoreHorizontal,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsxs)(X.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(X.DropdownMenuItem,{onClick:()=>x(m),children:[(0,a.jsx)(_.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(X.DropdownMenuItem,{onClick:()=>h(m.id),className:"text-destructive",children:[(0,a.jsx)(ea.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]})},et=e=>({Administration:"bg-purple-100 text-purple-800","Information Technology":"bg-blue-100 text-blue-800","Accounts & Finance":"bg-green-100 text-green-800","Human Resources":"bg-orange-100 text-orange-800","Customer Service":"bg-cyan-100 text-cyan-800",Design:"bg-pink-100 text-pink-800","Quality Control":"bg-yellow-100 text-yellow-800",Operations:"bg-gray-100 text-gray-800",Management:"bg-indigo-100 text-indigo-800",Production:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",er=e=>e.startsWith("A")?"bg-green-100 text-green-800":e.startsWith("B")?"bg-blue-100 text-blue-800":e.startsWith("C")?"bg-yellow-100 text-yellow-800":e.startsWith("D")?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800";function en(e){var l,t,n,i,d,o,m,u,x,h,f,j;let{isOpen:y,onClose:C,user:w}=e,{data:S}=(0,r.default)({queryKey:["religions"],queryFn:I}),{data:T}=(0,r.default)({queryKey:["employmentStatus"],queryFn:c}),{data:M}=(0,B.useQuery)(el(null==w?void 0:w.employeeId));if(!w)return null;let k=null;M&&(k=URL.createObjectURL(M));let P=(e=>{let a=new Date,l=new Date(e),s=a.getFullYear()-l.getFullYear(),t=a.getMonth()-l.getMonth();return(t<0||0===t&&a.getDate()<l.getDate())&&s--,s})(w.dateOfBirth);return(0,a.jsx)(N.Dialog,{open:y,onOpenChange:C,children:(0,a.jsxs)(N.DialogContent,{className:"lg:min-w-5xl",children:[(0,a.jsxs)(N.DialogHeader,{children:[(0,a.jsxs)(N.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(Q.User,{className:"h-5 w-5"}),"User Details - ",w.fullName]}),(0,a.jsxs)(N.DialogDescription,{children:["Comprehensive information for ",w.fullName," (Employee ID:"," ",w.employeeId,")"]})]}),(0,a.jsx)(b.ScrollArea,{className:"max-h-[70vh] pr-4",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(v.Card,{children:(0,a.jsx)(v.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)(p.Avatar,{className:"h-24 w-24",children:[(0,a.jsx)(p.AvatarImage,{src:k||"/placeholder.svg",alt:w.fullName}),(0,a.jsx)(p.AvatarFallback,{className:"text-2xl",children:w.fullName.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:w.fullName}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(s.Badge,{className:"".concat(et(null!=(x=null==(l=w.department)?void 0:l.name)?x:"")),variant:"secondary",children:null==(t=w.department)?void 0:t.name}),(0,a.jsx)(s.Badge,{variant:"outline",children:null==(n=w.role)?void 0:n.name}),(0,a.jsxs)(s.Badge,{className:"".concat(er(w.grading)),variant:"secondary",children:["Grade: ",w.grading]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(G,{className:"h-4 w-4"}),w.employeeId]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(V.Calendar,{className:"h-4 w-4"}),"Joined ",(0,A.formatDate)(w.dateOfJoining)]})]})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(v.Card,{children:[(0,a.jsx)(v.CardHeader,{children:(0,a.jsxs)(v.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(Q.User,{className:"h-5 w-5"}),"Personal Information"]})}),(0,a.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),(0,a.jsx)("p",{className:"font-medium",children:w.fullName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"National ID"}),(0,a.jsx)("p",{className:"font-mono",children:w.nid})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(F,{className:"h-4 w-4"}),"Date of Birth"]}),(0,a.jsxs)("p",{children:[(0,A.formatDate)(w.dateOfBirth)," (",P," years old)"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(E,{className:"h-4 w-4"}),"Blood Group"]}),(0,a.jsx)(s.Badge,{variant:"outline",className:"font-mono",children:w.bloodGroup})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"EnumResponse"}),(0,a.jsx)("p",{className:"font-medium",children:null==S||null==(i=S.data.find(e=>e.value===w.religion))?void 0:i.name})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(W.Phone,{className:"h-4 w-4"}),"Mobile Number"]}),(0,a.jsx)("p",{className:"font-mono",children:w.mobileNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(J.Mail,{className:"h-4 w-4"}),"Email Address"]}),(0,a.jsx)("p",{className:"break-all",children:w.email})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(K.MapPin,{className:"h-4 w-4"}),"Address"]}),(0,a.jsx)("p",{className:"text-sm leading-relaxed",children:w.address})]})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsx)(v.CardHeader,{children:(0,a.jsxs)(v.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(U.AlertTriangle,{className:"h-5 w-5"}),"Emergency Contact"]})}),(0,a.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact Person"}),(0,a.jsx)("p",{className:"font-medium",children:w.emergencyContactName})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(W.Phone,{className:"h-4 w-4"}),"Contact Number"]}),(0,a.jsx)("p",{className:"font-mono",children:w.emergencyContactNumber})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(v.Card,{children:[(0,a.jsx)(v.CardHeader,{children:(0,a.jsxs)(v.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(R,{className:"h-5 w-5"}),"Professional Information"]})}),(0,a.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Employee ID"}),(0,a.jsx)(s.Badge,{variant:"outline",className:"font-mono",children:w.employeeId})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(V.Calendar,{className:"h-4 w-4"}),"Date of Joining"]}),(0,a.jsx)("p",{children:(0,A.formatDate)(w.dateOfJoining)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(q,{className:"h-4 w-4"}),"Department"]}),(0,a.jsx)(s.Badge,{className:"".concat(et(null!=(h=null==(d=w.department)?void 0:d.name)?h:"")),variant:"secondary",children:null==(o=w.department)?void 0:o.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Role"}),(0,a.jsx)(s.Badge,{variant:"outline",children:null!=(f=null==(m=w.role)?void 0:m.name)?f:""})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(z,{className:"h-4 w-4"}),"Grading"]}),(0,a.jsx)(s.Badge,{className:"".concat(er(w.grading)),variant:"secondary",children:w.grading})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(g.Users,{className:"h-4 w-4"}),"Team Assignment"]}),w.teamId?(0,a.jsx)(s.Badge,{variant:"outline",children:w.teamId?"Unknown Team":"Unassigned"}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"Unassigned"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Employment Status"}),(0,a.jsx)(s.Badge,{variant:"outline",className:"font-medium",children:null!=(j=null==T||null==(u=T.data.find(e=>e.value===w.employmentStatus))?void 0:u.name)?j:""})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(H.Clock,{className:"h-4 w-4"}),"Probation Period"]}),(0,a.jsx)(s.Badge,{variant:"outline",children:w.probationPeriod})]})]})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsx)(v.CardHeader,{children:(0,a.jsxs)(v.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(L.DollarSign,{className:"h-5 w-5"}),"Financial Information"]})}),(0,a.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Basic Salary"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-600",children:(0,A.formatSalary)(w.basicSalary)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Gross Salary"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(w.basicSalary+w.medicalAllowance+w.conveyanceAllowance+w.houseRent)})]})]}),(0,a.jsx)(D,{}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"House Rent Allowance"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(w.houseRent)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Medical Allowance"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(w.medicalAllowance)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Conveyance Allowance"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(w.conveyanceAllowance)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(O.Calculator,{className:"h-4 w-4"}),"Overtime Amount (per hour)"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(w.overTimeAmount)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Formula: (salary ÷ 30 ÷ 8) × 2 × 0.6"})]})]})]}),(0,a.jsx)(D,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Overhead Cost"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:(0,A.formatSalary)(w.overheadCost)})]})]})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsx)(v.CardHeader,{children:(0,a.jsx)(v.CardTitle,{className:"text-lg",children:"Record Information"})}),(0,a.jsx)(v.CardContent,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-muted-foreground",children:"Created At"}),(0,a.jsx)("p",{children:(0,A.formatDate)(w.createdAt)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-muted-foreground",children:"Last Updated"}),(0,a.jsx)("p",{children:(0,A.formatDate)(w.updatedAt)})]})]})})]})]})})]})})}var ei=e.i(16090),ed=e.i(46087),ec=e.i(22617),eo=e.i(94462),em=e.i(93479),eu=e.i(10204),ex=e.i(67489),eh=e.i(91825),eg=(0,n.createServerReference)("7f53f8c4a464272ce11654b1797d818a4cff571559",n.callServer,void 0,n.findSourceMapURL,"getRoles"),ef=e.i(31979),ej=(0,n.createServerReference)("7f9c18cf54fd9fd9ffbbfcf0dbd7c1b9c893c4e926",n.callServer,void 0,n.findSourceMapURL,"createUser"),ep=(0,n.createServerReference)("7f626405597f4e7fa4db7ed2a57923383626139aef",n.callServer,void 0,n.findSourceMapURL,"updateUser"),ev=(0,n.createServerReference)("7f9c86d49fe2391085cfaf8aa3a3b5b515b38521bc",n.callServer,void 0,n.findSourceMapURL,"uploadUserProfilePicture"),eN=e.i(85796),eb=e.i(94706);let ey=eb.default.object({fullName:eb.default.string().min(1,"Full name is required"),nid:eb.default.string().min(1,"NID is required"),mobileNumber:eb.default.string().min(5,"Mobile number is required"),email:eb.default.email("Invalid email"),bloodGroup:eb.default.string().min(1,"Blood group is required"),dateOfBirth:eb.default.date({error:"Date of birth is required"}),address:eb.default.string().min(1,"Address is required"),religion:eb.default.number().min(0,"Religion is required"),emergencyContactName:eb.default.string().min(1,"Emergency contact name required"),emergencyContactNumber:eb.default.string().min(1,"Emergency contact number required"),employeeId:eb.default.string().min(1,"Employee ID is required"),dateOfJoining:eb.default.date({error:"Joining date is required"}),departmentId:eb.default.string().min(1,"Department is required"),roleId:eb.default.string().min(1,"Role is required"),grading:eb.default.string().min(1,"Grading is required"),probationPeriod:eb.default.string().min(1,"Probation period is required"),teamId:eb.default.string().min(1,"Team is required"),designation:eb.default.string().min(1,"Designation is required"),basicSalary:eb.default.number().nonnegative(),houseRent:eb.default.number().nonnegative(),medicalAllowance:eb.default.number().nonnegative(),conveyanceAllowance:eb.default.number().nonnegative(),overTimeAmount:eb.default.number().nonnegative(),overheadCost:eb.default.number().nonnegative(),password:eb.default.string().min(6,"Password must be at least 6 characters")}),eC={fullName:"",nid:"",mobileNumber:"",email:"",bloodGroup:"",dateOfBirth:void 0,address:"",religion:0,emergencyContactName:"",emergencyContactNumber:"",employeeId:"",dateOfJoining:void 0,departmentId:"",roleId:"",grading:"",probationPeriod:"",teamId:"",designation:"",basicSalary:0,houseRent:0,medicalAllowance:0,conveyanceAllowance:0,overTimeAmount:0,overheadCost:0,password:""};var ew=e.i(94814),eS=e.i(56909);let eA=(0,P.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var eD=e.i(37727),eI=e.i(53145);function eT(e){var l;let{isOpen:s,onClose:n,user:d}=e,{data:c}=(0,r.default)({queryKey:["teams"],queryFn:ef.getTeams}),{data:o}=(0,r.default)({queryKey:["roles"],queryFn:eg}),{data:m}=(0,r.default)({queryKey:["departments"],queryFn:i}),{data:u}=(0,r.default)({queryKey:["religions"],queryFn:I}),{register:x,handleSubmit:h,reset:g,setValue:y,watch:C,formState:{errors:w,isSubmitting:S}}=(0,eI.useForm)({resolver:(0,ew.zodResolver)(ey)}),{mutateAsync:A}=(0,eh.useSkillMutation)({mutationFn:e=>ej(e),queryKey:["users"]}),{mutateAsync:D}=(0,eh.useSkillMutation)({mutationFn:e=>{let{employeeId:a,body:l}=e;return ev({employeeId:a,body:l})},onClose:n,reset:g,queryKey:["profilePics"]}),{mutateAsync:U}=(0,eh.useSkillMutation)({mutationFn:e=>{let{user:a,userId:l}=e;return ep(a,l)},onClose:n,reset:g,queryKey:["users"]}),{data:P}=(0,B.useQuery)(el(null==d?void 0:d.employeeId)),[R,q]=(0,f.useState)(),[F,O]=(0,f.useState)(),[V,H]=(0,f.useState)(null),[L,E]=(0,f.useState)(void 0),z=(0,f.useRef)(null),G=C(["basicSalary","houseRent","medicalAllowance","conveyanceAllowance"]);(0,f.useEffect)(()=>{y("overTimeAmount",Math.round(G.reduce((e,a)=>Number(e)+Number(a),0)/30/8*1.2))},[G]),(0,f.useEffect)(()=>{if(d)g({...d,dateOfBirth:new Date(d.dateOfBirth),dateOfJoining:new Date(d.dateOfJoining)}),O((0,eN.toBangladeshTime)(d.dateOfBirth)),q((0,eN.toBangladeshTime)(d.dateOfJoining)),y("dateOfBirth",(0,eN.toBangladeshTime)(d.dateOfBirth)||new Date),y("dateOfJoining",(0,eN.toBangladeshTime)(d.dateOfJoining)||new Date);else{g(eC);let e=Math.floor(new Date().getTime()/1e6);H(null),y("employeeId","EMP"+e)}},[d,g,y]);let J=e=>{let{field:a,date:l}=e;"dateOfJoining"===a?q(l):O(l)},K=()=>{q(void 0),O(void 0),n()},W=async e=>{let a=j.toast.loading("Saving...");try{if(d){let l=await U({user:e,userId:d.id});if(l.success&&L){j.toast.loading("Uploading profile picture...",{id:a});let e=new FormData;e.append("File",L),await D({employeeId:l.data.id,body:e})}j.toast.success("User updated successfully!",{id:a})}else{let l=await A(e);if(l.success&&L){j.toast.loading("Uploading profile picture...",{id:a});let e=new FormData;e.append("File",L),await D({employeeId:l.data.id,body:e})}j.toast.success("User updated successfully!",{id:a})}}catch(e){console.error(e),j.toast.error("Unexpected error occurred",{id:a})}},Y=null;return P&&d&&(Y=URL.createObjectURL(P)),(0,a.jsx)(N.Dialog,{open:s,onOpenChange:K,children:(0,a.jsxs)(N.DialogContent,{className:"min-w-[80vw] lg:min-w-5xl",children:[(0,a.jsxs)(N.DialogHeader,{children:[(0,a.jsxs)(N.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(Q.User,{className:"h-5 w-5"}),d?"Edit User":"Add New User"]}),(0,a.jsx)(N.DialogDescription,{children:d?"Update user information below.":"Enter user details to create a new user account."})]}),(0,a.jsx)(b.ScrollArea,{className:"max-h-[70vh] pr-4",children:(0,a.jsxs)("form",{className:"space-y-6",children:[(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{children:[(0,a.jsx)(v.CardTitle,{className:"text-lg",children:"Profile Picture"}),(0,a.jsx)(v.CardDescription,{children:"Upload a profile picture for the user"})]}),(0,a.jsxs)(v.CardContent,{className:"flex items-center gap-4",children:[(0,a.jsxs)(p.Avatar,{className:"h-20 w-20",children:[(0,a.jsx)(p.AvatarImage,{src:V||Y||"/placeholder.svg",alt:(null==d?void 0:d.fullName)||"User"}),(0,a.jsx)(p.AvatarFallback,{children:(null==d?void 0:d.fullName)?null==d?void 0:d.fullName.split(" ").map(e=>e[0]).join("").toUpperCase():"U"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(t.Button,{type:"button",variant:"outline",onClick:()=>{var e;return null==(e=z.current)?void 0:e.click()},className:"flex items-center gap-2",children:[(0,a.jsx)(eA,{className:"h-4 w-4"}),"Upload Picture"]}),(0,a.jsx)("input",{ref:z,type:"file",accept:"image/*",onChange:e=>{var a;let l=null==(a=e.target.files)?void 0:a[0];if(E(l),l){let e=new FileReader;e.onload=e=>{var a;H(null==(a=e.target)?void 0:a.result)},e.readAsDataURL(l)}},className:"hidden"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recommended: Square image, max 2MB"})]})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{children:[(0,a.jsx)(v.CardTitle,{className:"text-lg",children:"Personal Information"}),(0,a.jsx)(v.CardDescription,{children:"Basic personal details"})]}),(0,a.jsxs)(v.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(ed.default,{label:"Full Name",id:"fullName",register:x,errors:w}),(0,a.jsx)(ed.default,{label:"National ID (NID)",id:"nid",register:x,errors:w}),(0,a.jsx)(ed.default,{label:"Mobile Number",id:"mobileNumber",register:x,errors:w}),(0,a.jsx)(ed.default,{label:"Email Address",id:"email",type:"email",register:x,errors:w}),(0,a.jsx)(ec.default,{label:"Blood Group",id:"bloodGroup",setValue:y,errors:w,defaultValue:null==d?void 0:d.bloodGroup,children:T.map(e=>(0,a.jsx)(ex.SelectItem,{value:e,children:e},e))}),(0,a.jsx)(ei.default,{label:"Date of Birth",id:"dateOfBirth",errors:w,setValue:y,handleDateChange:J,dateValue:F}),(0,a.jsx)(ec.default,{label:"Religion",id:"religion",setValue:y,errors:w,defaultValue:null==d||null==(l=d.religion)?void 0:l.toString(),valueAsNumber:!0,children:null==u?void 0:u.data.map(e=>(0,a.jsx)(ex.SelectItem,{value:e.value.toString(),children:e.name},e.value))}),(0,a.jsx)("div",{className:"md:col-span-2 lg:col-span-3",children:(0,a.jsx)(eo.default,{label:"Address",id:"address",register:x,errors:w})})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{children:[(0,a.jsx)(v.CardTitle,{className:"text-lg",children:"Emergency Contact"}),(0,a.jsx)(v.CardDescription,{children:"Emergency contact person details"})]}),(0,a.jsxs)(v.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(ed.default,{label:"Emergency Contact Name",id:"emergencyContactName",register:x,errors:w}),(0,a.jsx)(ed.default,{label:"Emergency Contact Number",id:"emergencyContactNumber",register:x,errors:w})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{children:[(0,a.jsx)(v.CardTitle,{className:"text-lg",children:"Professional Information"}),(0,a.jsx)(v.CardDescription,{children:"Work-related details and assignments"})]}),(0,a.jsxs)(v.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(ed.default,{label:"Employee ID",id:"employeeId",register:x,errors:w,disabled:!0,className:"bg-muted",helperText:"Auto-generated by the system"}),(0,a.jsx)(ei.default,{label:"Date of Joining",id:"dateOfJoining",errors:w,setValue:y,handleDateChange:J,dateValue:R}),(0,a.jsx)(ec.default,{label:"Department",id:"departmentId",setValue:y,errors:w,defaultValue:null==d?void 0:d.departmentId,children:null==m?void 0:m.data.map(e=>(0,a.jsx)(ex.SelectItem,{value:e.id,children:e.name},e.id))}),(0,a.jsx)(ec.default,{label:"Role",id:"roleId",setValue:y,errors:w,defaultValue:null==d?void 0:d.roleId,children:null==o?void 0:o.data.map(e=>(0,a.jsx)(ex.SelectItem,{value:e.id,children:e.name},e.id))}),(0,a.jsx)(ec.default,{label:"Grading",id:"grading",setValue:y,errors:w,defaultValue:null==d?void 0:d.grading,children:M.map(e=>(0,a.jsx)(ex.SelectItem,{value:e,children:e},e))}),(0,a.jsx)(ec.default,{label:"Probation Period",id:"probationPeriod",setValue:y,errors:w,defaultValue:null==d?void 0:d.probationPeriod,children:k.map(e=>(0,a.jsx)(ex.SelectItem,{value:e,children:e},e))}),(0,a.jsx)(ec.default,{label:"Team",id:"teamId",setValue:y,errors:w,defaultValue:null==d?void 0:d.teamId,children:null==c?void 0:c.data.map(e=>(0,a.jsx)(ex.SelectItem,{value:e.id,children:e.name},e.id))}),(0,a.jsx)(ed.default,{label:"Designation",id:"designation",register:x,errors:w}),(0,a.jsx)(ed.default,{label:"Password",id:"password",register:x,errors:w,helperText:d?"  You cannot change password from here":"",disabled:!!d,className:d?"bg-muted":""})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{children:[(0,a.jsx)(v.CardTitle,{className:"text-lg",children:"Financial Information"}),(0,a.jsx)(v.CardDescription,{children:"Salary and cost-related details"})]}),(0,a.jsxs)(v.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(ed.default,{label:"Basic Salary (BDT)",id:"basicSalary",register:x,errors:w,valueAsNumber:!0}),(0,a.jsx)(ed.default,{label:"House Allowance (BDT)",id:"houseRent",register:x,errors:w,valueAsNumber:!0}),(0,a.jsx)(ed.default,{label:"Medical Allowance (BDT)",id:"medicalAllowance",register:x,errors:w,valueAsNumber:!0}),(0,a.jsx)(ed.default,{label:"Conveyance Allowance (BDT)",id:"conveyanceAllowance",register:x,errors:w,valueAsNumber:!0}),(0,a.jsx)(ed.default,{label:"Over Time Amount (BDT)",id:"overTimeAmount",register:x,errors:w,valueAsNumber:!0,disabled:!0,className:"bg-muted"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eu.Label,{htmlFor:"grossSalary",className:"flex items-center gap-1",children:"Gross Salary (BDT)"}),(0,a.jsx)(em.Input,{id:"grossSalary",type:"number",min:"0",placeholder:"Auto calculated",readOnly:!0,disabled:!0,className:"bg-muted",value:G.reduce((e,a)=>Number(e)+Number(a),0)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Auto calculated"})]}),(0,a.jsx)(ed.default,{label:"Overhead Cost (BDT)",id:"overheadCost",register:x,errors:w,valueAsNumber:!0})]})]})]})}),(0,a.jsxs)(N.DialogFooter,{children:[(0,a.jsxs)(t.Button,{type:"button",variant:"outline",onClick:K,children:[(0,a.jsx)(eD.X,{className:"mr-2 h-4 w-4"}),"Cancel"]}),(0,a.jsxs)(t.Button,{type:"submit",onClick:h(W),disabled:S,children:[(0,a.jsx)(eS.Save,{className:"mr-2 h-4 w-4"}),d?"Update User":"Create User"]})]})]})})}let eM=(0,P.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ek=(0,P.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),eB=e=>{let{stats:l}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(v.CardTitle,{className:"text-sm font-medium",children:"Total Users"}),(0,a.jsx)(g.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:l.total}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All registered users"})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(v.CardTitle,{className:"text-sm font-medium",children:"Active Users"}),(0,a.jsx)(eM,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:l.active}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Permanent users"})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(v.CardTitle,{className:"text-sm font-medium",children:"On Probation"}),(0,a.jsx)(H.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:l.onProbation}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users in probation period"})]})]}),(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(v.CardTitle,{className:"text-sm font-medium",children:"Departments"}),(0,a.jsx)(ek,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:l.departments}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active departments"})]})]})]})};var eU=e.i(87130),eP=e.i(55436),eR=e.i(64659),eq=e.i(73375),eF=e.i(63059),eO=e.i(19897),eV=e.i(31026),eH=e.i(55900);let eL=e=>{let{users:l,sort:s,onSort:r,onEdit:n,onDelete:i,onViewDetails:d,currentPage:c,totalPages:o,onPageChange:m,totalItems:u,itemsPerPage:x}=e,h=e=>{let{field:l,children:n}=e;return(0,a.jsx)(Z.TableHead,{children:(0,a.jsxs)(t.Button,{variant:"ghost",size:"sm",className:"h-auto p-0 font-semibold hover:bg-transparent",onClick:()=>r(l),children:[n,s.field===l&&("asc"===s.direction?(0,a.jsx)(eH.ChevronUp,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(eR.ChevronDown,{className:"ml-1 h-4 w-4"}))]})})},g=Math.min(c*x,u);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(v.Card,{className:"p-0",children:(0,a.jsx)(v.CardContent,{className:"p-0",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(Z.Table,{children:[(0,a.jsx)(Z.TableHeader,{children:(0,a.jsxs)(Z.TableRow,{children:[(0,a.jsx)(Z.TableHead,{className:"w-[80px]",children:"Profile"}),(0,a.jsx)(h,{field:"fullName",children:"Name & Contact"}),(0,a.jsx)(h,{field:"employeeId",children:"Employee ID"}),(0,a.jsx)(h,{field:"dateOfJoining",children:"Joining Date"}),(0,a.jsx)(h,{field:"department",children:"Department"}),(0,a.jsx)(h,{field:"role",children:"Role"}),(0,a.jsx)(h,{field:"grading",children:"Grading"}),(0,a.jsx)(h,{field:"basicSalary",children:"Salary"}),(0,a.jsx)(h,{field:"overTimeAmount",children:"Overtime"}),(0,a.jsx)(h,{field:"teamId",children:"Team"}),(0,a.jsx)(Z.TableHead,{className:"w-[50px]",children:"Actions"})]})}),(0,a.jsx)(Z.TableBody,{children:0===l.length?(0,a.jsx)(Z.TableRow,{children:(0,a.jsx)(Z.TableCell,{colSpan:12,className:"text-center py-8 text-muted-foreground",children:"No users found"})}):l.map(e=>(0,a.jsx)(es,{user:e,onViewDetails:d,onEdit:n,onDelete:i},e.id))})]})})})}),o>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(c-1)*x+1," to ",g," of ",u," users"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>m(1),disabled:1===c,children:[(0,a.jsx)(eO.ChevronsLeft,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"First page"})]}),(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>m(c-1),disabled:1===c,children:[(0,a.jsx)(eq.ChevronLeft,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Previous page"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,o)},(e,l)=>{let s=Math.max(1,Math.min(o-4,c-2))+l;return(0,a.jsx)(t.Button,{variant:c===s?"default":"outline",size:"sm",onClick:()=>m(s),className:"w-8 h-8 p-0",children:s},s)})}),(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>m(c+1),disabled:c===o,children:[(0,a.jsx)(eF.ChevronRight,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Next page"})]}),(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>m(o),disabled:c===o,children:[(0,a.jsx)(eV.ChevronsRight,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Last page"})]})]})]})]})},eE=e=>{let{users:l,handleEditUser:n,handleDeleteUser:d,handleViewDetails:c}=e,{data:o}=(0,r.default)({queryKey:["teams"],queryFn:ef.getTeams}),{data:m}=(0,r.default)({queryKey:["departments"],queryFn:i}),{data:u}=(0,r.default)({queryKey:["roles"],queryFn:eg}),[x,h]=(0,f.useState)(1),[g,j]=(0,f.useState)({search:"",department:"",role:"",teamId:"",bloodGroup:"",grading:"",probationPeriod:""}),[p,N]=(0,f.useState)({field:"fullName",direction:"asc"}),b=(0,f.useMemo)(()=>{let e=l.filter(e=>{let a=!g.search||e.fullName.toLowerCase().includes(g.search.toLowerCase())||e.email.toLowerCase().includes(g.search.toLowerCase())||e.employeeId.toLowerCase().includes(g.search.toLowerCase())||e.mobileNumber.includes(g.search),l=!g.department||e.departmentId===g.department,s=!g.role||e.roleId===g.role,t=!g.teamId||e.teamId===g.teamId,r=!g.bloodGroup||e.bloodGroup===g.bloodGroup,n=!g.grading||e.grading===g.grading,i=!g.probationPeriod||e.probationPeriod===g.probationPeriod;return a&&l&&s&&t&&r&&n&&i});return e.sort((e,a)=>{let l=e[p.field],s=a[p.field];return"string"==typeof l&&"string"==typeof s?"asc"===p.direction?l.localeCompare(s):s.localeCompare(l):"number"==typeof l&&"number"==typeof s?"asc"===p.direction?l-s:s-l:0}),e},[l,g,p]),y=Math.ceil(b.length/10),C=b.slice((x-1)*10,10*x),w=(e,a)=>{if("all"===a){j(a=>({...a,[e]:""})),h(1);return}j(l=>({...l,[e]:a})),h(1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.Card,{children:[(0,a.jsxs)(v.CardHeader,{children:[(0,a.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(eU.Filter,{className:"h-5 w-5"}),"Filters"]}),(0,a.jsx)(v.CardDescription,{children:"Filter users by various criteria"})]}),(0,a.jsxs)(v.CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Search"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eP.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(em.Input,{placeholder:"Search users...",value:g.search,onChange:e=>w("search",e.target.value),className:"pl-10 w-full"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 w-full",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Department"}),(0,a.jsxs)(ex.Select,{value:g.department,onValueChange:e=>w("department",e),children:[(0,a.jsx)(ex.SelectTrigger,{className:"w-full",children:(0,a.jsx)(ex.SelectValue,{placeholder:"All departments"})}),(0,a.jsxs)(ex.SelectContent,{children:[(0,a.jsx)(ex.SelectItem,{value:"all",children:"All departments"}),null==m?void 0:m.data.map(e=>(0,a.jsx)(ex.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Role"}),(0,a.jsxs)(ex.Select,{value:g.role,onValueChange:e=>w("role",e),children:[(0,a.jsx)(ex.SelectTrigger,{className:"w-full",children:(0,a.jsx)(ex.SelectValue,{placeholder:"All roles"})}),(0,a.jsxs)(ex.SelectContent,{children:[(0,a.jsx)(ex.SelectItem,{value:"all",children:"All roles"}),null==u?void 0:u.data.map(e=>(0,a.jsx)(ex.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Team"}),(0,a.jsxs)(ex.Select,{value:g.teamId,onValueChange:e=>w("teamId",e),children:[(0,a.jsx)(ex.SelectTrigger,{className:"w-full",children:(0,a.jsx)(ex.SelectValue,{placeholder:"All teams"})}),(0,a.jsxs)(ex.SelectContent,{children:[(0,a.jsx)(ex.SelectItem,{value:"all",children:"All teams"}),null==o?void 0:o.data.map(e=>(0,a.jsx)(ex.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Blood Group"}),(0,a.jsxs)(ex.Select,{value:g.bloodGroup,onValueChange:e=>w("bloodGroup",e),children:[(0,a.jsx)(ex.SelectTrigger,{className:"w-full",children:(0,a.jsx)(ex.SelectValue,{placeholder:"All blood groups"})}),(0,a.jsxs)(ex.SelectContent,{children:[(0,a.jsx)(ex.SelectItem,{value:"all",children:"All blood groups"}),T.map(e=>(0,a.jsx)(ex.SelectItem,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Grading"}),(0,a.jsxs)(ex.Select,{value:g.grading,onValueChange:e=>w("grading",e),children:[(0,a.jsx)(ex.SelectTrigger,{className:"w-full",children:(0,a.jsx)(ex.SelectValue,{placeholder:"All grades"})}),(0,a.jsxs)(ex.SelectContent,{children:[(0,a.jsx)(ex.SelectItem,{value:"all",children:"All grades"}),M.map(e=>(0,a.jsx)(ex.SelectItem,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Probation"}),(0,a.jsxs)(ex.Select,{value:g.probationPeriod,onValueChange:e=>w("probationPeriod",e),children:[(0,a.jsx)(ex.SelectTrigger,{className:"w-full",children:(0,a.jsx)(ex.SelectValue,{placeholder:"All probation status"})}),(0,a.jsxs)(ex.SelectContent,{children:[(0,a.jsx)(ex.SelectItem,{value:"all",children:"All probation status"}),k.map(e=>(0,a.jsx)(ex.SelectItem,{value:e,children:e},e))]})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)(t.Button,{variant:"outline",onClick:()=>{j({search:"",department:"",role:"",teamId:"",bloodGroup:"",grading:"",probationPeriod:""}),h(1)},className:"w-full bg-transparent",children:"Clear Filters"})})]}),Object.entries(g).some(e=>{let[,a]=e;return a})&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Active filters:"}),Object.entries(g).map(e=>{let[l,t]=e;return t&&(0,a.jsx)(s.Badge,{variant:"secondary",className:"text-xs",children:l.toUpperCase()},l)})]})]})]}),(0,a.jsx)(eL,{users:C,sort:p,onSort:e=>{N(a=>({field:e,direction:a.field===e&&"asc"===a.direction?"desc":"asc"}))},onEdit:n,onDelete:d,onViewDetails:c,currentPage:x,totalPages:y,onPageChange:h,totalItems:b.length,itemsPerPage:10})]})};function ez(){var e,n,p;let{data:v,isFetching:N}=(0,r.default)({queryKey:["users"],queryFn:o.getUsers}),{data:b,isFetching:y}=(0,r.default)({queryKey:["departments"],queryFn:i}),{data:C,isFetching:w}=(0,r.default)({queryKey:["employmentStatus"],queryFn:c}),{mutateAsync:S}=(0,u.useMutation)({mutationFn:e=>d(e),onSuccess:e=>{console.log(e)}}),[A,D]=(0,f.useState)(!1),[I,T]=(0,f.useState)(!1),[M,k]=(0,f.useState)(null),B=(0,f.useMemo)(()=>{var e,a;if((null==v?void 0:v.data.length)===0||(null==b?void 0:b.data.length)===0)return{total:0,active:0,onProbation:0,departments:0};let l=null!=(e=null==v?void 0:v.data.length)?e:0,s=null==v?void 0:v.data.filter(e=>"Permanent"===(0,m.getStatusName)(null==C?void 0:C.data,e.employmentStatus)).length,t=null==v?void 0:v.data.filter(e=>"Probation"!=(0,m.getStatusName)(null==C?void 0:C.data,e.employmentStatus)).length;return{total:l,active:null!=s?s:0,onProbation:null!=t?t:0,departments:null!=(a=null==b?void 0:b.data.length)?a:0}},[v,b,N,y]),U=async e=>{let a=j.toast.loading("Deleting user...");if((await S(e)).success)return void j.toast.success("User deleted successfully!",{id:a});j.toast.dismiss(a)};return(N||(null==v?void 0:v.success))&&(y||(null==b?void 0:b.success))&&(w||(null==C?void 0:C.success))?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Users,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)(s.Badge,{variant:"secondary",className:"text-sm",children:[null!=(n=null==v?void 0:v.data.length)?n:0," users"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(x.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,a.jsxs)(t.Button,{onClick:()=>{k(null),D(!0)},size:"sm",children:[(0,a.jsx)(h.Plus,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]}),(0,a.jsx)(eB,{stats:B}),(0,a.jsx)(eE,{users:null!=(p=null==v?void 0:v.data)?p:[],handleEditUser:e=>{k(e),D(!0)},handleDeleteUser:U,handleViewDetails:e=>{k(e),T(!0)}}),(0,a.jsx)(eT,{isOpen:A,onClose:()=>D(!1),user:M}),(0,a.jsx)(en,{isOpen:I,onClose:()=>T(!1),user:M})]}):(0,a.jsx)(l.default,{message:null!=(e=null==v?void 0:v.message)?e:"Something went wrong",status:500})}}]);